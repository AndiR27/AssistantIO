@if (course.id != null) {
<app-header></app-header>

<div class="course-container">
  <!-- ▶︎ Modern Course Header with Gradient -->
  <div class="course-hero">
    <div class="hero-content">
      <div class="hero-icon">
        <mat-icon>school</mat-icon>
      </div>
      <div class="hero-text">
        <h1 class="course-title">{{ course.name }}</h1>
        <p class="course-subtitle">{{ course.code }}</p>
      </div>
    </div>

    <div class="course-info-chips">
      <mat-chip class="info-chip">
        <mat-icon matChipAvatar>person</mat-icon>
        {{ course.teacher }}
      </mat-chip>
      <mat-chip class="info-chip">
        <mat-icon matChipAvatar>calendar_today</mat-icon>
        {{ course.semester }} - {{ course.year_course }}
      </mat-chip>
      <mat-chip class="info-chip">
        <mat-icon matChipAvatar>groups</mat-icon>
        {{ students.length }} étudiant{{ students.length > 1 ? 's' : '' }}
      </mat-chip>
    </div>
  </div>

  <!-- ▶︎ Actions Section Title -->
  <div class="section-header">
    <h2 class="section-title">
      <mat-icon>add_circle_outline</mat-icon>
      <span>Actions rapides</span>
    </h2>
    <p class="section-subtitle">Gérez les étudiants et les travaux pratiques</p>
  </div>

  <!-- ▶︎ Enhanced Form Cards Grid -->
  <div class="add-section-grid">
    <!-- Card 1: Add Student -->
    <mat-card class="add-card student-card mat-elevation-z2">
      <div class="card-icon-header">
        <div class="card-icon blue-icon">
          <mat-icon>person_add</mat-icon>
        </div>
        <mat-card-header>
          <mat-card-title>Ajouter un étudiant</mat-card-title>
          <mat-card-subtitle>Inscription manuelle</mat-card-subtitle>
        </mat-card-header>
      </div>

      <mat-card-content>
        <app-add-student (added)="loadStudents()"></app-add-student>
      </mat-card-content>
    </mat-card>

    <!-- Card 2: Upload TXT -->
    <mat-card class="add-card upload-card mat-elevation-z2">
      <div class="card-icon-header">
        <div class="card-icon green-icon">
          <mat-icon>upload_file</mat-icon>
        </div>
        <mat-card-header>
          <mat-card-title>Import par fichier</mat-card-title>
          <mat-card-subtitle>Fichier .txt</mat-card-subtitle>
        </mat-card-header>
      </div>
      <mat-card-content>
        <app-upload-file-txt (uploaded)="loadStudents()"></app-upload-file-txt>
      </mat-card-content>
    </mat-card>

    <!-- Card 3: Add TP -->
    <mat-card class="add-card tp-card mat-elevation-z2">
      <div class="card-icon-header">
        <div class="card-icon orange-icon">
          <mat-icon>assignment_add</mat-icon>
        </div>
        <mat-card-header>
          <mat-card-title>Créer un TP</mat-card-title>
          <mat-card-subtitle>Avec fichier .zip</mat-card-subtitle>
        </mat-card-header>
      </div>
      <mat-card-content>
        <app-rendu-tp (uploaded)="loadTPInfos()"></app-rendu-tp>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- ▶︎ Tableau des étudiants vs TPs -->
  <app-table-submissions [courseId]="courseId()" [course]="course" [students]="students" [tps]="tps"
    (refresh)="loadTPInfos(); loadStudents()">
  </app-table-submissions>

  <!-- ▶︎ Lien de retour -->
  <div class="back-link">
    <button mat-stroked-button color="primary" routerLink="/home">
      ← Retour à la liste des cours
    </button>
  </div>
</div>

<app-footer></app-footer>
}